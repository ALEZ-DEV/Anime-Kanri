name: Anime-Kanri-Compilation

on:
  push:
    tags:
      - 'v[0-9]+.[0-9]+.[0-9]+'

jobs:
  build-windows:
    runs-on: windows-latest

    steps:
    - uses: actions/checkout@v3
    - uses: flutter-actions/setup-flutter@v2
    - name: Build-Windows
    - run: cargo install rinf
    - run: vcpkg install protobuf protobuf:x64-windows
    - run: flutter pub get
    - run: rinf message
    - run: flutter build windows --release
